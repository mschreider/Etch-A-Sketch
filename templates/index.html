<!DOCTYPE html>
<html>
    <head>
        <title>Etch-A-Sketch!</title>
        <link rel="stylesheet" href="../static/main.css">
    </head>
    <body>
        <header>
            <h1>etch-a-sketch</h1>
            <hr>
        </header>
        
        <button class="clear">Clear Sketch</button>
        <button class="resize">Change Grid Size</button>
        <div class="container" id="container"></div>
        
        <script>     
            var width = 16;       
            var container = document.getElementById("container");
            const clear_btn = document.querySelector(".clear");
            const resize_btn = document.querySelector(".resize");

            function createGrid(width){
                
                //(x,y) = (row, column)
                var row_size = 600/width + "px";
                var column_size = 600/width + "px";
                
                container.style.gridTemplateRows = `repeat(${width}, ${row_size})`;
                container.style.gridTemplateColumns = `repeat(${width}, ${column_size})`;
                
                for(let i=0; i<width; i++){
                    for(let j=0; j<width; j++){
                        var box = document.createElement('div');
                        box.classList.add('grid');
                        box.setAttribute('id', `box[${ i }][${ j }]`);
                        container.appendChild(box);
                    }
                }
                let boxes = document.querySelectorAll(".grid");
                boxes.forEach((box) => {
                    box.addEventListener('mouseover', function() {
                        box.style.backgroundColor = "#81d8d0";
                    });
                });
            }

            resize_btn.addEventListener('click', function() {
                container.innerHTML = "";
                width = parseInt(prompt("Enter the width of the square."));
                createGrid(width);
                console.log(container.childNodes.length);
            }); 

            clear_btn.addEventListener('click', function() {
                container.innerHTML = "";
                createGrid(width);
                console.log(container.childNodes.length);
            });

            createGrid(width);

        </script>
    </body>
</html>